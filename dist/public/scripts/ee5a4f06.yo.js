"use strict";angular.module("panicApp",["ngRoute","panicApp.Controllers","panicApp.referenceDataServices","panicApp.designBuildDirectives","panicApp.designBuildFilters","ui.bootstrap","ngSocial"]).config(function($routeProvider,$locationProvider){$locationProvider.hashPrefix("!"),$routeProvider.when("/",{templateUrl:"/views/ng-partials/home.html",controller:"StaticPageCtrl"}).when("/fabrics",{templateUrl:"/views/ng-partials/fabrics.html",controller:"StaticPageCtrl"}).when("/party",{templateUrl:"/views/ng-partials/party.html",controller:"StaticPageCtrl"}).when("/about",{templateUrl:"/views/ng-partials/about.html",controller:"StaticPageCtrl"}).when("/terms",{templateUrl:"/views/ng-partials/terms.html",controller:"StaticPageCtrl"}).when("/privacy",{templateUrl:"/views/ng-partials/privacy.html",controller:"StaticPageCtrl"}).when("/collection",{templateUrl:"/views/ng-partials/dressCollection.html",controller:"DressCollectionCtrl"}).when("/shop/:styleId/:itemId",{templateUrl:"/views/ng-partials/shopItem.html",controller:"ShopItemCtrl"}).when("/design",{templateUrl:"/views/ng-partials/silhouettes.html",controller:"SilhouetteCtrl"}).when("/design/:styleId",{templateUrl:"/views/ng-partials/designBuild.html",controller:"NewDesignBuildCtrl"}).when("/design/:styleId/:itemId",{templateUrl:"/views/ng-partials/designBuild.html",controller:"NewDesignBuildCtrl"}).when("/review/:styleId/dress/:designCode",{templateUrl:"/views/ng-partials/idggPlaceOrder.html",controller:"NewDesignBuildCtrl"}).when("/design/:styleId/dress/:designCode",{templateUrl:"/views/ng-partials/designBuild.html",controller:"NewDesignBuildCtrl"}).otherwise({redirectTo:"/"})}),function(){for(var method,noop=function(){},methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],length=methods.length,console=window.console=window.console||{};length--;)method=methods[length],console[method]||(console[method]=noop)}();var _gaq=_gaq||[];angular.module("analytics",[]).run(["$http",function(){console.log("run analytics"),_gaq.push(["_setAccount","UA-42859790-2"]),_gaq.push(["_setDomainName","none"]);var ga=document.createElement("script");ga.type="text/javascript",ga.async=!0,ga.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ga,s)}]).service("analytics",function($rootScope,$window,$location,$routeParams){$rootScope.$on("$viewContentLoaded",track),console.log("analytics service");var track=function(){console.log("in track");var path=convertPathToQueryString($location.path(),$routeParams);$window._gaq.push(["_trackPageview",path])},convertPathToQueryString=function(path,$routeParams){for(var key in $routeParams){var queryParam="/"+$routeParams[key];path=path.replace(queryParam,"")}return path}}),function($){$.deparam=function(params,coerce){var obj={},coerce_types={"true":!0,"false":!1,"null":null};return $.each(params.replace(/\+/g," ").split("&"),function(j,v){var val,param=v.split("="),key=decodeURIComponent(param[0]),cur=obj,i=0,keys=key.split("]["),keys_last=keys.length-1;if(/\[/.test(keys[0])&&/\]$/.test(keys[keys_last])?(keys[keys_last]=keys[keys_last].replace(/\]$/,""),keys=keys.shift().split("[").concat(keys),keys_last=keys.length-1):keys_last=0,2===param.length)if(val=decodeURIComponent(param[1]),coerce&&(val=val&&!isNaN(val)?+val:"undefined"===val?void 0:void 0!==coerce_types[val]?coerce_types[val]:val),keys_last)for(;keys_last>=i;i++)key=""===keys[i]?cur.length:keys[i],cur=cur[key]=keys_last>i?cur[key]||(keys[i+1]&&isNaN(keys[i+1])?{}:[]):val;else $.isArray(obj[key])?obj[key].push(val):obj[key]=void 0!==obj[key]?[obj[key],val]:val;else key&&(obj[key]=coerce?void 0:"")}),obj}}(jQuery);var referenceDataServices=angular.module("panicApp.referenceDataServices",["ngResource"]);referenceDataServices.factory("Range",function($resource){return $resource("/referenceData/:rangeId.json",{},{styleCatalogue:{method:"GET",params:{rangeId:"styleCatalogue"},isArray:!0},itemCollection:{method:"GET",params:{rangeId:"itemCollection"},isArray:!0},labelLookup:{method:"GET",params:{rangeId:"labels"},isArray:!0}})}).factory("DesignBuilder",function($resource){return $resource("/referenceData/designBuilder/:fileId.json",{},{fabricSets:{method:"GET",params:{fileId:"fabricSets"},isArray:!0}})}).factory("MetaData",function($location){return{og_image:"http://img.aurza.com/skt-001-02-013-slv-009-00-013-nek-001-00-003-blt-002-00-000-ext-002-00-000-ext-003-00-000.png",og_title:"Sheath Dress",og_url:$location.absUrl(),og_site_name:"AURZA",og_type:"dress"}}).service("CatalogueService",function(Range,DesignBuilder,$q){return{getStyleListPromise:function(){var styleCatalogue,deferred=$q.defer(),styles=[];return styleCatalogue=Range.styleCatalogue(),styleCatalogue.$promise.then(function(result){styles=_.reduce(result,function(a,b){return a.concat(b.styleId)},[]),deferred.resolve(styles)}),deferred.promise},getItemCollectionPromiseForStyles:function(styles){return $q.all(_.map(styles,function(style){return DesignBuilder.get({fileId:style}).$promise})).then(function(results){var aggregatedData=[];return angular.forEach(results,function(result){aggregatedData=aggregatedData.concat(result.collection)}),aggregatedData})},getItemCollectionWithStyleDataPromiseForStyles:function(styles){return $q.all(_.map(styles,function(style){return DesignBuilder.get({fileId:style}).$promise})).then(function(results){var aggregatedData=[];return angular.forEach(results,function(result){angular.forEach(result.collection,function(item){var itemExt=_.extend({},item,result.style);aggregatedData.push(itemExt)})}),aggregatedData})},getItemPromise:function(styleId,itemId){var designConfig,deferred=$q.defer(),itemData={itemDesign:""};return DesignBuilder.get({fileId:styleId}).$promise.then(function(result){itemId||(itemId=result.style.defaultItemId),angular.forEach(result.collection,function(item){item.itemId==itemId&&(itemData.itemDesign=angular.copy(item))}),designConfig=_.extend({},result,itemData),deferred.resolve(designConfig)}),deferred.promise;var deferred}}}).service("ReferenceDataCache",function(Range,DesignBuilder){var styleCatalogue=null,labelCache=null,optionCache=null,itemCollection=null;return{getStyleCatalogue:function(){return null==styleCatalogue&&(styleCatalogue=Range.styleCatalogue(),console.log("Lazy instantiation of styleCatalogue:"+styleCatalogue.length)),styleCatalogue},getLabels:function(){return console.log("getLabels"),null==labelCache&&(labelCache=Range.labelLookup(),console.log("Lazy instantiation of labelCache:"+labelCache.length)),labelCache},getOptions:function(){return console.log("getOptions"),null==optionCache&&(optionCache=DesignBuilder.options(),console.log("Lazy instantiation of optionCache:"+optionCache.length)),optionCache},getItemCollection:function(){return null==itemCollection&&(itemCollection=Range.itemCollection(function(data){console.log("----Lazy instantiation of itemCollection: "+data.length)},function(data){console.log("Oops -failed to instantiate itemCollection: "+data.length)})),itemCollection},getItemDesign:function(itemId){var items={},out="";return items=this.getItemCollection(function(){for(var i=0;i<items.length;i++)if(items[i].itemId===itemId){console.log("---Found item: "+itemId+" -> "+items[i].design),out=angular.copy(items[i].design);break}},function(data){console.log("Oops -failed to getItemColection: "+data.length)}),out},getStyleById:function(id,$scope){var styleCatalogue=Range.styleCatalogue(function(){for(var i=0;i<styleCatalogue.length;i++)if(styleCatalogue[i].styleId===id){console.log("Found style: "+id+" -> "+styleCatalogue[i].styleId),$scope.style=angular.copy(styleCatalogue[i]);break}})},getItemById:function(id,$scope){var itemCollection=Range.itemCollection(function(){for(var i=0;i<itemCollection.length;i++)if(itemCollection[i].itemId===id){console.log("Found item: "+id+" -> "+itemCollection[i].itemId),$scope.item=angular.copy(itemCollection[i]);break}})}}}).filter("fabricLookup",function(ReferenceDataCache){return function(input){for(var options=ReferenceDataCache.getOptions(),out="",i=0;i<options.length;i++)if(options[i].id===input){console.log("**Found options: "+input+" -> "+options[i].fabrics),out=angular.copy(options[i].fabrics);break}return out}}).filter("trimLookup",function(ReferenceDataCache){return function(input){for(var options=ReferenceDataCache.getOptions(),out="",i=0;i<options.length;i++)if(options[i].id===input){console.log("***********Found trim: "+input+" -> "+options[i].trims),out=angular.copy(options[i].trims);break}return out}}).filter("labelLookup",function(ReferenceDataCache){return function(input){for(var labels=ReferenceDataCache.getLabels(),out="",i=0;i<labels.length;i++)labels[i].id===input&&(console.log("Found label: "+input+" -> "+labels[i].label),out=angular.copy(labels[i].label));return out}});var designBuildDirective=angular.module("panicApp.designBuildDirectives",[]);designBuildDirective.directive("styleOverview",function(){return{restrict:"E",scope:{styleInfo:"="},template:'<div class="container-fluid "><div class="row">    <div class="col-md-6">        <div class="name">{{styleInfo.styleName}}</div>        <div class="formal-name">{{styleInfo.styleFormalName}} </div>    </div>    <div class="col-md-6">        <div class="price-label">TOTAL</div>        <div class="price">HKD {{styleInfo.price | number:0}}</div>    </div></div><div class="row top-border" style="padding:10px 0 10px 0">    <ul>        <li class="description">{{styleInfo.strapline}}</li>        <li class="description" ng-repeat="para in styleInfo.description">{{para}}</li>    </ul></div></div>'}}),designBuildDirective.directive("drawDesign",function(){return{scope:{model:"=",design:"="},template:'<div class="db-image body sprite-body {{model}}"></div><div draw-dress parts="design.design"></div><div draw-accessories parts="design.extras"></div>'}}),designBuildDirective.directive("drawDress",function(){return{scope:{parts:"="},template:'<div ng-repeat="selection in parts"> <div class="db-image {{selection.type}} sprite-{{selection.fabric}} {{selection.type}}-{{selection.id}}-{{selection.size}}-{{selection.fabric}}"></div> <div class="db-image trm sprite-{{selection.trim}} trm-{{selection.type}}-{{selection.id}}-{{selection.size}}-{{selection.trim}}"></div></div>'}}),designBuildDirective.directive("drawAccessories",function(){return{scope:{parts:"="},template:'<div ng-repeat="selection in parts"> <div class="db-image {{selection.type}} sprite-{{selection.fabric}} {{selection.type}}-{{selection.id}}-{{selection.size}}-{{selection.fabric}}"></div></div>'}}),designBuildDirective.directive("partSelector",function(){return{restrict:"E",scope:{part:"=",selectedOption:"="},template:' <div data-toggle="buttons">  <!--https://github.com/angular-ui/bootstrap/issues/233-->  <div class="option-button" ng-repeat="value in part.values">    <button type="button" class="btn btn-default option"       ng-model="selectedOption[\'id\']" btn-radio="value.id"       ng-class="{highlight: selectedOption[\'id\']==value.id }">     <div class="db-icons-sprite {{part.type}}-{{value.id}}" ></div>   </button>  </div></div>'}}),designBuildDirective.directive("sizeSelector",function(){return{restrict:"E",scope:{part:"=",selectedOption:"="},template:'<select class="form-control input-sm" ng-model="selectedOption[\'size\']" ng-options="size.id as size.name for size in part.sizes"></select>'}}),designBuildDirective.directive("fabricSelector",function(){return{restrict:"E",scope:{fabricSet:"=",selectedOption:"=",attrib:"="},template:' <div class="fabric-group">   <div class="row fabric-header">     {{fabricSet.setName}}   </div>   <div class="row ">       <button ng-repeat="fabric in fabricSet.fabrics" type="button" class="btn fabric-selector fabric{{fabric.fabId}}"            ng-model="selectedOption[attrib]"           btn-radio="fabric.fabId"></button>   </div></div>'}}),designBuildDirective.directive("silhouette",function(){return{restrict:"A",scope:{design:"="},template:'<a href="#!/design/{{design.styleId}}"><div class="row image"><div class="col-lg-12 "> <div class="pic sprite-body {{design.silhouetteImage}}"></div></div></div><div class="row title handwriting large-hand">{{design.styleName}}</div><div class="row type handwriting">({{design.styleFormalName}})</span></div><div class="row price"><span class="glyphicon glyphicon-tags"></span>&nbsp from HKD {{design.price | number:0}}</div></a>'}});var designBuildFilter=angular.module("panicApp.designBuildFilters",[]);designBuildFilter.filter("filterSets",function(){return function(sets,filter){var filteredResult=[];for(var filterFabric in filter)for(var fabricSet in sets)if(filter[filterFabric].setId==sets[fabricSet].setId){filteredResult.push(sets[fabricSet]);break}return filteredResult}}),designBuildFilter.filter("rollover",function(){return function(img){return img.replace(/_bk$/,"")}}),designBuildFilter.filter("designString",function(){return function(design){var returnString=JSON.stringify(design);return console.log("Returning---: "+returnString),returnString}}),angular.module("panicApp.Controllers",[]).run(["$http",function(){console.log("Controllers: run analytics"),_gaq.push(["_setAccount","UA-42859790-2"]),_gaq.push(["_setDomainName",".aurza.com"]);var ga=document.createElement("script");ga.type="text/javascript",ga.async=!0,ga.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ga,s)}]);var trackPageInGoogleAnalytics=function($rootScope,$window,$location,$routeParams){$rootScope.$on("$viewContentLoaded",track($window,$location,$routeParams))},track=function($window,$location,$routeParams){var path=convertPathToQueryString($location.path(),$routeParams);console.log("track: about to push: "+path),$window._gaq.push(["_trackPageview",path])},convertPathToQueryString=function(locpath,$routeParams){for(var key in $routeParams){var queryParam="/"+$routeParams[key];locpath=locpath.replace(queryParam,"")}for(key in $routeParams)console.log("key="+key);var querystring=getAsUriParameters($routeParams);return""===querystring?locpath:locpath+"?"+querystring},getAsUriParameters=function(data){var url="";for(var prop in data)url+=encodeURIComponent(prop)+"="+encodeURIComponent(data[prop])+"&";return url.substring(0,url.length-1)};angular.module("panicApp.Controllers").controller("HomeCarouselCtrl",["$scope","$rootScope","$window","$location","$routeParams",function($scope,$rootScope,$window,$location,$routeParams){trackPageInGoogleAnalytics($rootScope,$window,$location,$routeParams),$scope.myInterval=5e3,$scope.slides=[{image:"images/home/Choose.png",text:"Choose..."},{image:"images/home/Customize.png",text:"Customize..."},{image:"images/home/Cherish.png",text:"Cherish!"}]}]),angular.module("panicApp.Controllers").controller("StaticPageCtrl",["$scope","$rootScope","$window","$location","$routeParams","$anchorScroll",function($scope,$rootScope,$window,$location,$routeParams,$anchorScroll){trackPageInGoogleAnalytics($rootScope,$window,$location,$routeParams),$scope.scrollTo=function(id){$location.hash(id),$anchorScroll()}}]),angular.module("panicApp.Controllers").controller("DressCollectionCtrl",["$scope","Range","CatalogueService","$rootScope","$window","$location","$routeParams",function($scope,Range,CatalogueService,$rootScope,$window,$location,$routeParams){trackPageInGoogleAnalytics($rootScope,$window,$location,$routeParams);var stylesPromise=CatalogueService.getStyleListPromise(),styles=[];stylesPromise.then(function(result){styles=result;var itemsPromise=CatalogueService.getItemCollectionWithStyleDataPromiseForStyles(["sheath","swing","flare","doloman","swoosh","shift","shirt","shirt-maxi"]);itemsPromise.then(function(result){$scope.dresses=angular.copy(result)})}),$scope.silhouettes=[{id:"",label:"-- All silhouettes --"},{id:"sheath",label:"COCO (Sheath)"},{id:"swing",label:"AUDREY (Swing)"},{id:"flare",label:"ALEXA (Flare)"},{id:"doloman",label:"CHRISTINA (Doloman)"},{id:"swoosh",label:"KATE (Swoosh)"},{id:"shift",label:"EDDIE (Shift)"},{id:"shirt",label:"ELLE (Shirt)"},{id:"maxi-shirt",label:"CLAUDIA (Maxi-shirt)"}],$scope.types=[{id:"",label:"-- All dresses --"},{id:"dress",label:"Dress"},{id:"skirt",label:"Skirt"},{id:"top",label:"Top"}],$scope.colours=[{id:"",label:"-- All colours --"},{id:"red",label:"Red"},{id:"blue",label:"Blue"},{id:"black",label:"Black"}],$scope.silhouetteFilter=$scope.silhouettes[0].id,$scope.typeFilter=$scope.types[0].id,$scope.colourFilter=$scope.colours[0].id,$scope.reset=function(){$scope.silhouetteFilter=$scope.silhouettes[0].id,$scope.typeFilter=$scope.types[0].id,$scope.colourFilter=$scope.colours[0].id}}]),angular.module("panicApp.Controllers").controller("ShopItemCtrl",["$scope","Range","ReferenceDataCache","CatalogueService","$rootScope","$window","$location","$routeParams",function($scope,Range,ReferenceDataCache,CatalogueService,$rootScope,$window,$location,$routeParams){trackPageInGoogleAnalytics($rootScope,$window,$location,$routeParams),CatalogueService.getItemPromise($routeParams.styleId,$routeParams.itemId).then(function(result){$scope.item=angular.copy(result)}),$scope.sizing={size:"",bust:"",waist:"",hips:"",hollowfloor:"",height:""}}]),angular.module("panicApp.Controllers").controller("PurchaseCtrl",["$scope","Range","$rootScope","$window","$location","$routeParams",function($scope,Range,$rootScope,$window,$location,$routeParams){trackPageInGoogleAnalytics($rootScope,$window,$location,$routeParams)}]),angular.module("panicApp.Controllers").controller("SilhouetteCtrl",["$scope","Range","$rootScope","$window","$location","$routeParams","$http","$q",function($scope,Range,$rootScope,$window,$location,$routeParams,$http,$q){$scope.$emit("LOAD"),trackPageInGoogleAnalytics($rootScope,$window,$location,$routeParams),$scope.styles=Range.styleCatalogue(function(){console.log("styles.length: "+$scope.styles.length)});var perks_reset;perks_reset=[{id:"all",label:"View all","default":!0,values:["skirt","top","dress","silk","maxi"]},{id:"separates",label:"Perfect Skirt or Top",values:["skirt","top"]},{id:"silk_dress",label:"Perfect Silk Dress",values:["silk"]},{id:"tailored_dress",label:"Perfect Tailored Dress",values:["dress"]},{id:"skirt_and_top",label:"Perfect Skirt and Top",values:["skirt","top"]},{id:"silk_maxi",label:"Perfect Silk Maxi Dress",values:["maxi"]},{id:"bundles",label:" Multi-Dress Bundles",values:["silk","maxi","dress"]},{id:"gift",label:" GIFT BOX (Voucher)",values:["silk","dress"]}],$scope.perkValues="",$scope.search=function(item){var found=!1;console.log("$scope.perkValues: "+JSON.stringify($scope.perkValues)),console.log("item.type: "+JSON.stringify(item.type));for(var i=0;i<$scope.perkValues.length;i++)if($scope.perkValues[i]==item.type){console.log("Found dress: "+item.type+" checked: "+$scope.perkValues[i]),found=!0;break}return found},$scope.reset=function(){$scope.perkValues=angular.copy(perks_reset[0].values),$scope.perks=angular.copy(perks_reset)},$scope.reset();var aggregatedPromise=$q.all([$http.get("/images/003.png"),$http.get("/images/008.png"),$http.get("/images/010.png"),$http.get("/images/011.png"),$http.get("/images/013.png"),$http.get("/images/014.png"),$http.get("/images/085.png"),$http.get("/images/088.png"),$http.get("/images/089.png"),$http.get("/images/120.png"),$http.get("/images/160.png"),$http.get("/images/161.png"),$http.get("/images/165.png"),$http.get("/images/166.png"),$http.get("/images/168.png"),$http.get("/images/169.png"),$http.get("/images/170.png")]);aggregatedPromise.then(function(){$scope.$emit("UNLOAD")})}]).controller("appController",["$scope","$location","$anchorScroll",function($scope,$location,$anchorScroll){$scope.headline="/how-to-help"==$location.path()?"How YOU can HELP...":"Send us YOUR design",$scope.scrollTo=function(id){$location.hash(id),$anchorScroll()},$scope.$on("LOAD",function(){$scope.loading=!0}),$scope.$on("UNLOAD",function(){$scope.loading=!1})}]).controller("MetaCtrl",["$scope","MetaData",function($scope,MetaData){$scope.data=MetaData}]).controller("MetaCtrlInput",["$scope","MetaData",function($scope,MetaData){$scope.data=MetaData}]),angular.module("panicApp.Controllers").controller("RangeDetailsCtrl",["$scope","$routeParams","Range","$rootScope","$window","$location",function($scope,$routeParams,Range,$rootScope,$window,$location){$rootScope.$on("$viewContentLoaded",track($window,$location,$routeParams)),$scope.ranges=Range.query(),$scope.range=Range.get({rangeId:$routeParams.rangeId})}]),angular.module("panicApp.Controllers").controller("NewDesignBuildCtrl",["$scope","$routeParams","Range","ReferenceDataCache","DesignBuilder","CatalogueService","$rootScope","$window","$location",function($scope,$routeParams,Range,ReferenceDataCache,DesignBuilder,CatalogueService,$rootScope,$window,$location){trackPageInGoogleAnalytics($rootScope,$window,$location,$routeParams);var master="",categoryId="dresses",styleId=$routeParams.styleId,designCode=($routeParams.itemId,$routeParams.designCode),allFabricSets={},range={};$scope.form="",$scope.current_title="Test",$scope.current_description="Test description",$scope.headline="test",$scope.tabs={style:!0,design:!1,fit:!1,order:!1},CatalogueService.getItemPromise($routeParams.styleId,$routeParams.itemId).then(function(result){$scope.item=angular.copy(result),_.isUndefined(designCode)&&(master=angular.copy(result.itemDesign.itemDesign)),range=angular.copy(result),$scope.master=master,$scope.params=$.param(master),$scope.cancel()}),$scope.isDebugCollapsed=!0,$scope.styleId=styleId,$scope.categoryId=categoryId,designCode&&($scope.designCode=designCode,$scope.deparam=angular.copy($.deparam(designCode)));var clearTrim=function(partType){partType.trim=""};$scope.clearTrim=clearTrim,$scope.dressPartCode=function(selection){return console.log("SELCTION:"+selection),selection.type+"-"+selection.id+selection.length+"-"+selection.fabric},$scope.cancel=function(){$scope.form=angular.copy($scope.deparam?$scope.deparam:master)},$scope.fabricSets=DesignBuilder.fabricSets(function(data){allFabricSets=angular.copy(data);for(var option in range.options)for(var set in range.options[option].fabricSets)for(var fabricSet in allFabricSets)if(range.options[option].fabricSets[set].set==allFabricSets[fabricSet].setId){$scope.range.options[option].fabricSets[set]=allFabricSets[fabricSet];break}},function(){alert("ooops - loading fabrics")}),$scope.save=function(){master=$scope.form,$scope.cancel()},$scope.isCancelDisabled=function(){return angular.equals(master,$scope.form)},$scope.param=function(form){return $.param(form)},$scope.designString=function(form){var returnString=" ";console.log("I have:"+JSON.stringify(form));for(var design in form){var partString="";for(var element in form[design])"$$hashKey"!=element&&(partString+=element+" = "+JSON.stringify(form[design][element])+"| ");console.log(partString),returnString+=design+" :  %0D%0A "+partString+" %0D%0A "}return console.log("Returning---: "+returnString),returnString},$scope.designLink=function(form){var returnString=" ";return console.log("I have:"+JSON.stringify(form)),console.log("Returning---: "+returnString),returnString}}]);var loadStyle=function($scope){var category=getCategoryById($scope.ranges,$scope.categoryId),style=getStyleById(category.styles,$scope.styleId);$scope.category=category,$scope.style=style},getCategoryById=function(categories,id){for(var category=[],i=0;i<categories.length;i++)if(categories[i].catId===id){category=angular.copy(categories[i]);break}return console.log("Returning: "+category),category},getStyleById=function(styles,id){for(var style={},i=0;i<styles.length;i++)if(styles[i].styleId===id){style=angular.copy(styles[i]);break}return console.log("Returning: "+style),style},decodeDesign=function(code){$.deparam(code)},SizingCtrl=function($scope){$scope.open=function(){$scope.shouldBeOpen=!0},$scope.close=function(){$scope.closeMsg="I was closed at: "+new Date,$scope.shouldBeOpen=!1},$scope.opts={backdropFade:!0,dialogFade:!0}};