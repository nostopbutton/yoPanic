!function($){$.deparam=function(params,coerce){var obj={},coerce_types={"true":!0,"false":!1,"null":null};return $.each(params.replace(/\+/g," ").split("&"),function(j,v){var val,param=v.split("="),key=decodeURIComponent(param[0]),cur=obj,i=0,keys=key.split("]["),keys_last=keys.length-1;if(/\[/.test(keys[0])&&/\]$/.test(keys[keys_last])?(keys[keys_last]=keys[keys_last].replace(/\]$/,""),keys=keys.shift().split("[").concat(keys),keys_last=keys.length-1):keys_last=0,2===param.length)if(val=decodeURIComponent(param[1]),coerce&&(val=val&&!isNaN(val)?+val:"undefined"===val?void 0:void 0!==coerce_types[val]?coerce_types[val]:val),keys_last)for(;keys_last>=i;i++)key=""===keys[i]?cur.length:keys[i],cur=cur[key]=keys_last>i?cur[key]||(keys[i+1]&&isNaN(keys[i+1])?{}:[]):val;else $.isArray(obj[key])?obj[key].push(val):obj[key]=void 0!==obj[key]?[obj[key],val]:val;else key&&(obj[key]=coerce?void 0:"")}),obj}}(jQuery),angular.module("panicApp",["ngRoute","panicApp.Controllers","panicApp.referenceDataServices","panicApp.designBuildDirectives","panicApp.designBuildFilters","ui.bootstrap"]).config(function($routeProvider,$locationProvider){$locationProvider.hashPrefix("!"),$routeProvider.when("/collection",{templateUrl:"/views/ng-partials/dressCollection.html",controller:"DressCollectionCtrl"}).when("/item/:styleId/:itemId",{templateUrl:"/views/ng-partials/shopItem.html",controller:"DesignBuildCtrl"}).when("/item/:styleId/:itemId/:tab",{templateUrl:"/views/ng-partials/shopItemBuy.html",controller:"DesignBuildCtrl"}).when("/design",{templateUrl:"/views/ng-partials/silhouettes.html",controller:"SilhouetteCtrl"}).when("/design/:styleId",{templateUrl:"/views/ng-partials/designBuild.html",controller:"DesignBuildCtrl"}).when("/design/:styleId/:itemId",{templateUrl:"/views/ng-partials/designBuild.html",controller:"DesignBuildCtrl"}).when("/design/:styleId/:itemId/:tab",{templateUrl:"/views/ng-partials/designBuild.html",controller:"DesignBuildCtrl"}).otherwise({redirectTo:"/collection"})}),function(){for(var method,noop=function(){},methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],length=methods.length,console=window.console=window.console||{};length--;)method=methods[length],console[method]||(console[method]=noop)}();var _gaq=_gaq||[];angular.module("analytics",[]).run(["$http",function(){console.log("run analytics"),_gaq.push(["_setAccount","UA-42859790-2"]),_gaq.push(["_setDomainName","none"]);var ga=document.createElement("script");ga.type="text/javascript",ga.async=!0,ga.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ga,s)}]).service("analytics",function($rootScope,$window,$location,$routeParams){$rootScope.$on("$viewContentLoaded",track),console.log("analytics service");var track=function(){console.log("in track");var path=convertPathToQueryString($location.path(),$routeParams);$window._gaq.push(["_trackPageview",path])},convertPathToQueryString=function(path,$routeParams){for(var key in $routeParams){var queryParam="/"+$routeParams[key];path=path.replace(queryParam,"")}return path}});var referenceDataServices=angular.module("panicApp.referenceDataServices",["ngResource"]);referenceDataServices.factory("Range",function($resource){return $resource("/referenceData/:rangeId.json",{},{styleCatalogue:{method:"GET",params:{rangeId:"styleCatalogue"},isArray:!0},itemCollection:{method:"GET",params:{rangeId:"itemCollection"},isArray:!0},labelLookup:{method:"GET",params:{rangeId:"labels"},isArray:!0}})}).factory("DesignBuilder",function($resource){return $resource("/referenceData/designBuilder/:fileId.json",{},{fabricSets:{method:"GET",params:{fileId:"fabricSets"},isArray:!0}})}).factory("MetaData",function($location){return{og_image:"http://img.aurza.com/skt-001-02-013-slv-009-00-013-nek-001-00-003-blt-002-00-000-ext-002-00-000-ext-003-00-000.png",og_title:"Sheath Dress",og_url:$location.absUrl(),og_site_name:"AURZA",og_type:"dress"}}).service("CatalogueService",function(Range,DesignBuilder,$q){return{getStyleListPromise:function(){var styleCatalogue,deferred=$q.defer(),styles=[];return styleCatalogue=Range.styleCatalogue(),styleCatalogue.$promise.then(function(result){styles=_.reduce(result,function(a,b){return a.concat(b.styleId)},[]),deferred.resolve(styles)}),deferred.promise},getItemCollectionPromiseForStyles:function(styles){return $q.all(_.map(styles,function(style){return DesignBuilder.get({fileId:style}).$promise})).then(function(results){var aggregatedData=[];return angular.forEach(results,function(result){aggregatedData=aggregatedData.concat(result.collection)}),aggregatedData})},getItemCollectionWithStyleDataPromiseForStyles:function(styles){return $q.all(_.map(styles,function(style){return DesignBuilder.get({fileId:style}).$promise})).then(function(results){var aggregatedData=[];return angular.forEach(results,function(result){angular.forEach(result.collection,function(item){var itemExt=_.extend({},item,result.style);aggregatedData.push(itemExt)})}),aggregatedData})},getItemPromise:function(styleId,itemId){var designConfig,deferred=$q.defer(),itemData={itemDesign:""};return DesignBuilder.get({fileId:styleId}).$promise.then(function(result){itemId||(itemId=result.style.defaultItemId),angular.forEach(result.collection,function(item){itemId==item.itemId&&(itemData.itemDesign=angular.copy(item))}),designConfig=_.extend({},result,itemData),deferred.resolve(designConfig)}),deferred.promise;var deferred}}}).service("ReferenceDataCache",function(Range,DesignBuilder){var styleCatalogue=null,labelCache=null,optionCache=null,itemCollection=null;return{getStyleCatalogue:function(){return null==styleCatalogue&&(styleCatalogue=Range.styleCatalogue(),console.log("Lazy instantiation of styleCatalogue:"+styleCatalogue.length)),styleCatalogue},getLabels:function(){return console.log("getLabels"),null==labelCache&&(labelCache=Range.labelLookup(),console.log("Lazy instantiation of labelCache:"+labelCache.length)),labelCache},getOptions:function(){return console.log("getOptions"),null==optionCache&&(optionCache=DesignBuilder.options(),console.log("Lazy instantiation of optionCache:"+optionCache.length)),optionCache},getItemCollection:function(){return null==itemCollection&&(itemCollection=Range.itemCollection(function(data){console.log("----Lazy instantiation of itemCollection: "+data.length)},function(data){console.log("Oops -failed to instantiate itemCollection: "+data.length)})),itemCollection},getItemDesign:function(itemId){var items={},out="";return items=this.getItemCollection(function(){for(var i=0;i<items.length;i++)if(items[i].itemId===itemId){console.log("---Found item: "+itemId+" -> "+items[i].design),out=angular.copy(items[i].design);break}},function(data){console.log("Oops -failed to getItemColection: "+data.length)}),out},getStyleById:function(id,$scope){var styleCatalogue=Range.styleCatalogue(function(){for(var i=0;i<styleCatalogue.length;i++)if(styleCatalogue[i].styleId===id){console.log("Found style: "+id+" -> "+styleCatalogue[i].styleId),$scope.style=angular.copy(styleCatalogue[i]);break}})},getItemById:function(id,$scope){var itemCollection=Range.itemCollection(function(){for(var i=0;i<itemCollection.length;i++)if(itemCollection[i].itemId===id){console.log("Found item: "+id+" -> "+itemCollection[i].itemId),$scope.item=angular.copy(itemCollection[i]);break}})}}}).filter("fabricLookup",function(ReferenceDataCache){return function(input){for(var options=ReferenceDataCache.getOptions(),out="",i=0;i<options.length;i++)if(options[i].id===input){console.log("**Found options: "+input+" -> "+options[i].fabrics),out=angular.copy(options[i].fabrics);break}return out}}).filter("trimLookup",function(ReferenceDataCache){return function(input){for(var options=ReferenceDataCache.getOptions(),out="",i=0;i<options.length;i++)if(options[i].id===input){console.log("***********Found trim: "+input+" -> "+options[i].trims),out=angular.copy(options[i].trims);break}return out}}).filter("labelLookup",function(ReferenceDataCache){return function(input){for(var labels=ReferenceDataCache.getLabels(),out="",i=0;i<labels.length;i++)labels[i].id===input&&(console.log("Found label: "+input+" -> "+labels[i].label),out=angular.copy(labels[i].label));return out}});var designBuildDirective=angular.module("panicApp.designBuildDirectives",[]);designBuildDirective.directive("styleOverview",function(){return{restrict:"E",scope:{styleInfo:"="},template:'<div class="container-fluid "><div class="row">    <div class="col-md-6">        <div class="name">{{styleInfo.styleName}}</div>        <div class="formal-name">{{styleInfo.styleFormalName}} </div>        <div class="price">HKD {{styleInfo.price | number:0}}</div>    </div>    <div class="col-md-6">        <div class="price-label">TOTAL</div>    </div></div><div class="row top-border" style="padding:10px 0 10px 0">    <ul>        <li class="description">{{styleInfo.strapline}}</li>        <li class="description" ng-repeat="para in styleInfo.description">{{para}}</li>    </ul></div></div>'}}),designBuildDirective.directive("drawCollection",function(){return{scope:{item:"=",view:"="},template:' <div class="image"><img ng-src="/images/collection/{{item.itemDesign.itemId}}-md-{{view}}" alt="{{item.style.styleName}} - {{item.itemDesign.itemDesc}}"></div>'}}),designBuildDirective.directive("drawDesign",function(){return{scope:{model:"=",design:"="},template:'<div class="db-image body sprite-body {{model}}"></div><div draw-dress parts="design.design"></div><div draw-accessories parts="design.extras"></div>'}}),designBuildDirective.directive("drawDress",function(){return{scope:{parts:"="},template:'<div ng-repeat="selection in parts"> <div class="db-image {{selection.type}} sprite-{{selection.fabric}} {{selection.type}}-{{selection.id}}-{{selection.size}}-{{selection.fabric}}"></div> <div class="db-image trm sprite-{{selection.trim}} trm-{{selection.type}}-{{selection.id}}-{{selection.size}}-{{selection.trim}}"></div></div>'}}),designBuildDirective.directive("drawAccessories",function(){return{scope:{parts:"="},template:'<div ng-repeat="selection in parts"> <div class="db-image {{selection.type}} sprite-{{selection.fabric}} {{selection.type}}-{{selection.id}}-{{selection.size}}-{{selection.fabric}}"></div></div>'}}),designBuildDirective.directive("partSelector",function(){return{restrict:"E",scope:{part:"=",selectedOption:"="},template:' <div data-toggle="buttons">  <!--https://github.com/angular-ui/bootstrap/issues/233-->  <div class="option-button" ng-repeat="value in part.values">    <button type="button" class="btn btn-default option"       ng-model="selectedOption[\'id\']" btn-radio="value.id"       ng-class="{highlight: selectedOption[\'id\']==value.id }">     <div class="db-icons-sprite {{part.type}}-{{value.id}}" ></div>   </button>  </div></div>'}}),designBuildDirective.directive("sizeSelector",function(){return{restrict:"E",scope:{part:"=",selectedOption:"="},template:'<select class="form-control input-sm" ng-model="selectedOption[\'size\']" ng-options="size.id as size.name for size in part.sizes"></select>'}}),designBuildDirective.directive("fabricSelector",function(){return{restrict:"E",scope:{fabricSet:"=",selectedOption:"=",attrib:"="},template:' <div class="fabric-group">   <div class="row fabric-header">     {{fabricSet.setName}}   </div>   <div class="row ">       <button ng-repeat="fabric in fabricSet.fabrics" type="button" class="btn fabric-selector fabric{{fabric.fabId}}"            ng-model="selectedOption[attrib]"           btn-radio="fabric.fabId"></button>   </div></div>'}}),designBuildDirective.directive("silhouette",function(){return{restrict:"A",scope:{design:"="},template:'<a href="#!/design/{{design.styleId}}"><div class="row image"><div class="col-lg-12 "> <div class="pic sprite-body {{design.silhouetteImage}}"></div></div></div><div class="row title handwriting large-hand">{{design.styleName}}</div><div class="row type handwriting">({{design.styleFormalName}})</span></div><div class="row price"><span class="glyphicon glyphicon-tags"></span>&nbsp from HKD {{design.price | number:0}}</div></a>'}});var designBuildFilter=angular.module("panicApp.designBuildFilters",[]);designBuildFilter.filter("filterSets",function(){return function(sets,filter){var filteredResult=[];for(var filterFabric in filter)for(var fabricSet in sets)if(filter[filterFabric].setId==sets[fabricSet].setId){filteredResult.push(sets[fabricSet]);break}return filteredResult}}),designBuildFilter.filter("rollover",function(){return function(img){return alert("rollover: "+img.replace(/_bk$/,"")),img.replace(/_bk$/,"")}}),designBuildFilter.filter("designString",function(){return function(design){var returnString=JSON.stringify(design);return console.log("Returning---: "+returnString),returnString}}),designBuildFilter.filter("path",function(){return function(name,pre,post){return name&&pre+name+post||""}}),designBuildFilter.filter("lookup",function(){return function(design){var code=design.type+"-"+design.id+"-"+design.size;if(console.log("design.fabric: "+design.fabric),"000"===design.fabric){if("blt"===design.type)return"No belt selected";if("ext"===design.type&&"002"===design.id)return"No peplum selected";if("ext"===design.type&&"003"===design.id)return"No rosetta selected"}var codes=[{id:"nek-001-00",label:"Bateau neck"},{id:"nek-001-10",label:"Top with bateau neck"},{id:"nek-002-00",label:"Scoop neck"},{id:"nek-002-10",label:"Top with scoop neck"},{id:"nek-003-00",label:"V-slit neck"},{id:"nek-003-10",label:"Top with V-slit neck"},{id:"nek-004-00",label:"Tailored wrap"},{id:"nek-004-10",label:"Tailored wrap top"},{id:"nek-005-00",label:"V neck"},{id:"nek-005-10",label:"Top with V neck"},{id:"nek-006-00",label:"Dolomon top"},{id:"nek-007-00",label:"V neck Dolomon top"},{id:"nek-008-00",label:"Bustier top"},{id:"nek-009-00",label:"Asymetrical neckline"},{id:"nek-010-00",label:"Scoop neckline"},{id:"nek-011-00",label:"Low scoop neckline"},{id:"nek-009-01",label:"Short swoosh dress with an asymmetrical neckline"},{id:"nek-010-01",label:"Short swoosh dress with scoop neckline"},{id:"nek-011-01",label:"Short swoosh dress with a low scoop neckline"},{id:"nek-009-02",label:"Knee length swoosh dress with an asymmetrical neckline"},{id:"nek-010-02",label:"Knee length swoosh dress with scoop neckline"},{id:"nek-011-02",label:"Knee length swoosh dress with a low scoop neckline"},{id:"nek-009-04",label:"Long swoosh dress with an asymmetrical neckline"},{id:"nek-010-04",label:"Long swoosh dress with scoop neckline"},{id:"nek-011-04",label:"Long swoosh dress with a low scoop neckline"},{id:"nek-014-00",label:"Shift dress with scoop neckline"},{id:"nek-015-00",label:"Shift dress with kaftan style neckline"},{id:"nek-014-02",label:"Short length shift dress with scoop neckline"},{id:"nek-015-02",label:"Short length Shift dress with kaftan style neckline"},{id:"nek-017-02",label:"Knee Length Shirt dress with collar"},{id:"nek-018-02",label:"Knee Length Collarless Shirt dress "},{id:"nek-014-03",label:"Mid length shift dress with scoop neckline"},{id:"nek-015-03",label:"Mid length shift dress with kaftan style neckline"},{id:"nek-017-05",label:"Maxi Shirt dress with collar"},{id:"nek-018-05",label:"Maxi Collarless Shirt dress  "},{id:"slv-000-00",label:"Sleeveless"},{id:"slv-002-00",label:"Cap sleeves"},{id:"slv-006-00",label:"Elbow length sleeves"},{id:"slv-009-00",label:"Flared sleeves"},{id:"slv-001-00",label:"Cap sleeves"},{id:"slv-008-00",label:"Bell sleeves"},{id:"slv-011-00",label:"Long sleeved"},{id:"slv-016-00",label:"Short shirt sleeves"},{id:"skt-001-00",label:"pencil"},{id:"skt-002-00",label:"pencil - ruffle"},{id:"skt-005-00",label:"swing"},{id:"skt-007-00",label:"flare"},{id:"skt-001-01",label:"Short pencil skirt"},{id:"skt-002-01",label:"Short pencil skirt with ruffle"},{id:"skt-005-01",label:"Short swing skirt"},{id:"skt-007-01",label:"Short flare skirt"},{id:"skt-001-02",label:"Knee length pencil skirt"},{id:"skt-002-02",label:"Knee length pencil skirt with ruffle"},{id:"skt-005-02",label:"Knee length swing skirt"},{id:"skt-007-02",label:"Knee length flare skirt"},{id:"skt-001-04",label:"Long pencil skirt"},{id:"skt-002-04",label:"Long pencil skirt with ruffle"},{id:"skt-005-04",label:"Long swing skirt"},{id:"skt-007-04",label:"Long flare skirt"},{id:"ext-000-00",label:"None"},{id:"ext-002-00",label:"Peplum"},{id:"ext-003-00",label:"Rosetta"},{id:"blt-000-00",label:"No belt"},{id:"blt-002-00",label:"Ribbon belt"},{id:"blt-004-00",label:"Obi belt"},{id:"blt-003-00",label:"Silk belt"}];console.log("code: "+code);var result=_.find(codes,function(item){return item.id==code});return console.log("result: "+result),console.log("result && result.label: "+(result&&result.label)),result&&result.label?result.label:code}}),designBuildFilter.filter("fablookup",function(){return function(design){var code=design.fabric;if(console.log("design.fabric: "+design.fabric),"000"===design.fabric)return" ";var codes=[{id:"003",label:"Red viscose crepe"},{id:"011",label:"Black viscose crepe"},{id:"013",label:"Aubergine viscose crepe"},{id:"010",label:"Teal viscose crepe"},{id:"008",label:"Cream viscose crepe"},{id:"014",label:"Midnight blue viscose crepe"},{id:"085",label:"Turquoise silk"},{id:"087",label:"Cobalt blue silk"},{id:"088",label:"Hot pink silk"},{id:"089",label:"Coral sllk"},{id:"103",label:"Red leather"},{id:"108",label:"Cream leather"},{id:"111",label:"Black leather"},{id:"112",label:"Metallic leather"},{id:"113",label:"Aubergine leather"},{id:"114",label:"Cobalt blue leather"},{id:"115",label:"Navy leather"},{id:"116",label:"Hot pink leather"},{id:"118",label:"Taupe leather"},{id:"120",label:"Black faux leather"},{id:"300",label:"Printed cotton rose blue"},{id:"301",label:"Printed cotton rose red"},{id:"302",label:"Printed cotton rose teal"},{id:"303",label:"Printed cotton rose pink"},{id:"304",label:"Printed cotton rose monochrome"},{id:"305",label:"Printed cotton rose yellow"},{id:"306",label:"Printed cotton zebra blue"},{id:"307",label:"Printed cotton zebra red & yellow"},{id:"308",label:"Printed cotton zebra teal"},{id:"309",label:"Printed cotton zebra pink"},{id:"310",label:"Printed cotton zebra black"},{id:"311",label:"Printed cotton zebra grey"},{id:"312",label:"Printed cotton zebra yellow"},{id:"400",label:"Printed cotton rose blue"},{id:"401",label:"Printed cotton rose red"},{id:"402",label:"Printed cotton rose teal"},{id:"403",label:"Printed cotton rose pink"},{id:"404",label:"Printed cotton rose monochrome"},{id:"405",label:"Printed cotton rose yellow"},{id:"406",label:"Printed cotton zebra blue"},{id:"407",label:"Printed cotton zebra red & yellow"},{id:"408",label:"Printed cotton zebra teal"},{id:"409",label:"Printed cotton zebra pink"},{id:"410",label:"Printed cotton zebra black"},{id:"411",label:"Printed cotton zebra grey"},{id:"412",label:"Printed cotton zebra yellow"}];console.log("code: "+code);var result=_.find(codes,function(item){return item.id==code});return console.log("result: "+result),console.log("result && result.label: "+(result&&result.label)),result&&result.label?result.label:code}}),designBuildFilter.filter("trimlookup",function(){return function(trim){return console.log("trim: "+trim),"120"===trim?" with black faux-leather trim":""}}),angular.module("panicApp.Controllers",[]).run(["$http",function(){_gaq.push(["_setAccount","UA-42859790-2"]),_gaq.push(["_setDomainName",".aurza.com"]);var ga=document.createElement("script");ga.type="text/javascript",ga.async=!0,ga.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ga,s)}]);var trackPageInGoogleAnalytics=function($rootScope,$window,$location,$routeParams){$rootScope.$on("$viewContentLoaded",track($window,$location,$routeParams))},track=function($window,$location,$routeParams){var path=convertPathToQueryString($location.path(),$routeParams);console.log("Controllers: about to push: "+path),$window._gaq.push(["_trackPageview",path])},convertPathToQueryString=function(locpath,$routeParams){for(var key in $routeParams){var queryParam="/"+$routeParams[key];locpath=locpath.replace(queryParam,"")}var querystring=getAsUriParameters($routeParams);return""===querystring?locpath:locpath+"?"+querystring},getAsUriParameters=function(data){var url="";for(var prop in data)url+=encodeURIComponent(prop)+"="+encodeURIComponent(data[prop])+"&";return url.substring(0,url.length-1)};angular.module("panicApp.Controllers").controller("DesignBuildCtrl",["$scope","$routeParams","Range","ReferenceDataCache","DesignBuilder","CatalogueService","$rootScope","$window","$location",function($scope,$routeParams,Range,ReferenceDataCache,DesignBuilder,CatalogueService,$rootScope,$window,$location){trackPageInGoogleAnalytics($rootScope,$window,$location,$routeParams);var master="",categoryId="dresses",styleId=$routeParams.styleId,designCode=($routeParams.itemId,$routeParams.designCode),tab=$routeParams.tab,allFabricSets={},range={};$scope.form="",$scope.current_title="Test",$scope.current_description="Test description",$scope.headline="test",$scope.tabs={style:!0,design:!1,fit:!1,order:!1},tab&&($scope.tabs.style=!1,$scope.tabs[tab]=!0),$scope.view="-lg-front.jpg",CatalogueService.getItemPromise($routeParams.styleId,$routeParams.itemId).then(function(result){$scope.item=angular.copy(result),_.isUndefined(designCode)&&(master=angular.copy(result.itemDesign.itemDesign)),range=angular.copy(result),$scope.master=master,$scope.params=$.param(master),$scope.cancel()}),$scope.isDebugCollapsed=!0,$scope.styleId=styleId,$scope.categoryId=categoryId,designCode&&($scope.designCode=designCode,$scope.deparam=angular.copy($.deparam(designCode))),$scope.sizing={size:"",bust:"",waist:"",hips:"",hollowfloor:"",height:""};var clearTrim=function(partType){partType.trim=""};$scope.clearTrim=clearTrim,$scope.dressPartCode=function(selection){return console.log("SELCTION:"+selection),selection.type+"-"+selection.id+selection.length+"-"+selection.fabric},$scope.cancel=function(){$scope.form=angular.copy($scope.deparam?$scope.deparam:master)},$scope.fabricSets=DesignBuilder.fabricSets(function(data){allFabricSets=angular.copy(data);for(var option in range.options)for(var set in range.options[option].fabricSets)for(var fabricSet in allFabricSets)if(range.options[option].fabricSets[set].set==allFabricSets[fabricSet].setId){$scope.range.options[option].fabricSets[set]=allFabricSets[fabricSet];break}},function(){alert("ooops - loading fabrics")}),$scope.save=function(){master=$scope.form,$scope.cancel()},$scope.isCancelDisabled=function(){return angular.equals(master,$scope.form)},$scope.param=function(form){return $.param(form)},$scope.designString=function(form){var returnString=" ";console.log("I have:"+JSON.stringify(form));for(var design in form){var partString="";for(var element in form[design])"$$hashKey"!=element&&(partString+=element+" = "+JSON.stringify(form[design][element])+"| ");console.log(partString),returnString+=design+" :  %0D%0A "+partString+" %0D%0A "}return console.log("Returning---: "+returnString),returnString},$scope.designLink=function(form){var returnString=" ";return console.log("I have:"+JSON.stringify(form)),console.log("Returning---: "+returnString),returnString}}]);var loadStyle=function($scope){var category=getCategoryById($scope.ranges,$scope.categoryId),style=getStyleById(category.styles,$scope.styleId);$scope.category=category,$scope.style=style},getCategoryById=function(categories,id){for(var category=[],i=0;i<categories.length;i++)if(categories[i].catId===id){category=angular.copy(categories[i]);break}return console.log("Returning: "+category),category},getStyleById=function(styles,id){for(var style={},i=0;i<styles.length;i++)if(styles[i].styleId===id){style=angular.copy(styles[i]);break}return console.log("Returning: "+style),style},decodeDesign=function(code){$.deparam(code)};angular.module("panicApp.Controllers").controller("DressCollectionCtrl",["$scope","Range","CatalogueService","$rootScope","$window","$location","$routeParams",function($scope,Range,CatalogueService,$rootScope,$window,$location,$routeParams){trackPageInGoogleAnalytics($rootScope,$window,$location,$routeParams);var stylesPromise=CatalogueService.getStyleListPromise(),styles=[];stylesPromise.then(function(result){styles=result;var itemsPromise=CatalogueService.getItemCollectionWithStyleDataPromiseForStyles(["sheath","swing","flare","doloman","swoosh","shift","shirt","shirt-maxi"]);itemsPromise.then(function(result){$scope.dresses=angular.copy(result)})}),$scope.imageFilename="dress.png",$scope.rolloverFilename="front.jpg",$scope.silhouettes=[{id:"",label:"-- All silhouettes --"},{id:"sheath",label:"Sheath"},{id:"swing",label:"Swing"},{id:"swoosh",label:"Swoosh"},{id:"doloman",label:"Doloman"},{id:"flare",label:"Flare"},{id:"bustier",label:"Bustier"},{id:"shirt",label:"Shirt"},{id:"shift",label:"Shift"},{id:"Top",label:"Tops"}],$scope.types=[{id:"",label:"-- All dresses --"},{id:"dress",label:"Dress"},{id:"skirt",label:"Skirt"},{id:"top",label:"Top"}],$scope.fabricTypes=[{id:"",label:"-- All fabrics --"},{id:"dress",label:"Crepe"},{id:"skirt",label:"Silk"},{id:"faux-leather",label:"Leather"},{id:"sheer-silk",label:"Sheer Silk"},{id:"cotton",label:"Stretch Cotton"},{id:"floral-prints",label:"Floral prints"},{id:"zebra-prints",label:"Zebra prints"}],$scope.colours=[{id:"",label:"-- All colours --"},{id:"red",label:"Red"},{id:"blue",label:"Blue"},{id:"black",label:"Black"},{id:"cream",label:"Cream"},{id:"aubergine",label:"Aubergine"},{id:"pink",label:"Pink"},{id:"teal",label:"Teal"},{id:"coral",label:"Coral"},{id:"cobalt",label:"Cobalt"}],$scope.silhouetteFilter=$scope.silhouettes[0].id,$scope.typeFilter=$scope.types[0].id,$scope.fabricTypeFilter=$scope.types[0].id,$scope.colourFilter=$scope.colours[0].id,$scope.reset=function(){$scope.silhouetteFilter=$scope.silhouettes[0].id,$scope.typeFilter=$scope.types[0].id,$scope.fabricTypeFilter=$scope.types[0].id,$scope.colourFilter=$scope.colours[0].id}}]),angular.module("panicApp.Controllers").controller("RangeDetailsCtrl",["$scope","$routeParams","Range","$rootScope","$window","$location",function($scope,$routeParams,Range,$rootScope,$window,$location){$rootScope.$on("$viewContentLoaded",track($window,$location,$routeParams)),$scope.ranges=Range.query(),$scope.range=Range.get({rangeId:$routeParams.rangeId})}]),angular.module("panicApp.Controllers").controller("SilhouetteCtrl",["$scope","Range","$rootScope","$window","$location","$routeParams","$http","$q",function($scope,Range,$rootScope,$window,$location,$routeParams,$http,$q){$scope.$emit("LOAD"),trackPageInGoogleAnalytics($rootScope,$window,$location,$routeParams),$scope.styles=Range.styleCatalogue(function(){});var perks_reset;perks_reset=[{id:"all",label:"View all","default":!0,values:["skirt","top","dress","silk","maxi"]},{id:"separates",label:"Perfect Skirt or Top",values:["skirt","top"]},{id:"silk_dress",label:"Perfect Silk Dress",values:["silk"]},{id:"tailored_dress",label:"Perfect Tailored Dress",values:["dress"]},{id:"skirt_and_top",label:"Perfect Skirt and Top",values:["skirt","top"]},{id:"silk_maxi",label:"Perfect Silk Maxi Dress",values:["maxi"]},{id:"bundles",label:" Multi-Dress Bundles",values:["silk","maxi","dress"]},{id:"gift",label:" GIFT BOX (Voucher)",values:["silk","dress"]}],$scope.perkValues="",$scope.filterStyles=[{id:"",label:"-- All styles --"},{id:"sheath",label:"Sheath"},{id:"swing",label:"Swing"},{id:"swoosh",label:"Swoosh"},{id:"doloman",label:"Doloman"},{id:"flare",label:"Flare"},{id:"bustier",label:"Bustier"},{id:"shirt",label:"Shirt"},{id:"shift",label:"Shift"},{id:"Top",label:"Tops"}],$scope.filterTypes=[{id:"",label:"-- All types --"},{id:"dress",label:"Dress"},{id:"skirt",label:"Skirt"},{id:"top",label:"Top"}],$scope.filterFabrics=[{id:"",label:"-- All fabric groups --"},{id:"silk",label:"Silks"},{id:"crepe",label:"Crepe"},{id:"cotton",label:"Stretch cotton"}],$scope.reset=function(){$scope.styleFilter=$scope.filterStyles[0].id,$scope.typeFilter=$scope.filterTypes[0].id,$scope.fabricFilter=$scope.filterFabrics[0].id,$scope.fabricFilter=$scope.filterFabrics[0].id},$scope.search=function(item){var found=!1;console.log("$scope.perkValues: "+JSON.stringify($scope.perkValues)),console.log("item.type: "+JSON.stringify(item.type));for(var i=0;i<$scope.perkValues.length;i++)if($scope.perkValues[i]==item.type){console.log("Found dress: "+item.type+" checked: "+$scope.perkValues[i]),found=!0;break}return found},$scope.reset();var aggregatedPromise=$q.all([$http.get("/images/003.png"),$http.get("/images/008.png"),$http.get("/images/010.png"),$http.get("/images/011.png"),$http.get("/images/013.png"),$http.get("/images/014.png"),$http.get("/images/085.png"),$http.get("/images/088.png"),$http.get("/images/089.png"),$http.get("/images/120.png"),$http.get("/images/160.png"),$http.get("/images/161.png"),$http.get("/images/165.png"),$http.get("/images/166.png"),$http.get("/images/168.png"),$http.get("/images/169.png"),$http.get("/images/170.png")]);aggregatedPromise.then(function(){$scope.$emit("UNLOAD")})}]).controller("appController",["$scope","$location","$anchorScroll",function($scope,$location,$anchorScroll){$scope.scrollTo=function(id){$location.hash(id),$anchorScroll()},$scope.$on("LOAD",function(){$scope.loading=!0}),$scope.$on("UNLOAD",function(){$scope.loading=!1})}]).controller("MetaCtrl",["$scope","MetaData",function($scope,MetaData){$scope.data=MetaData}]).controller("MetaCtrlInput",["$scope","MetaData",function($scope,MetaData){$scope.data=MetaData}]),angular.module("panicApp.Controllers").controller("StaticPageCtrl",["$scope","$rootScope","$window","$location","$routeParams","$anchorScroll",function($scope,$rootScope,$window,$location,$routeParams,$anchorScroll){trackPageInGoogleAnalytics($rootScope,$window,$location,$routeParams),$scope.scrollTo=function(id){$location.hash(id),$anchorScroll()}}]);