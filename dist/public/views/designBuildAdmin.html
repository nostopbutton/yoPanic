<div id="designBuildView" class="container">
    <div class="container-fluid">
        <div class="row-fluid">

            <div id="view_dress_panel" class="span2">
                <!--<div class="container-fluid fixed">-->
                    <!--<div class="row-fluid">-->
                        <div class="admindress">
                            <div class="fixed">
                            <!--<div class=" pic body db-parts-sprite model-front"></div>-->
                            <img ng-src="images/parts/whole body.png" class="pic body">
                            <div draw-dress dress="form.design"></div>
                            <div draw-trim dress="form.design"></div>
                            <div draw-dress dress="form.belt"></div>
                            <div draw-dress dress="form.extras"></div>
                                </div>
                        </div>
                    <!--</div>-->
                <!--</div>-->
            </div>

            <div id="dress_designer_panel" class="span10">
                <div class="container-fluid">

                    <div class="row-fluid">
                        <div class="span4 align-left">
                            {{design.longName}}
                        </div>
                        <div class="span4 align-center">
                            <b>HKD {{design.price}}</b>
                        </div>
                        <div class="span4 align-right">


                        </div>
                    </div>

                    <div class="row-fluid">
                        <div class="span12 top-border">
                            <i>{{range.strapline}}</i>
                        </div>
                    </div>

                    <div class="row-fluid">
                        <span ng-repeat="para in range.description"><p>{{para}}</p></span>
                    </div>
                </div>

            <div class="row-fluid" ng-hide="isFlatDesigner">

                <div class="top-border" ng-repeat="option in range.options" heading="{{option.label}}" is-open="option.active">
                    {{option.label}}
                    <div class="" ng-repeat="part in option.parts" heading="{{part.label}}" active="pane.active=part.active">

                        <!--<div class="container-fluid">-->
                            <div class="row-fluid  top-border-small">
                                {{part.label}}
                            </div>
                            <div class="row-fluid  top-border-small">

                                <div class="span6">
                                    <div class="align-center" name="option_choice" data-toggle="buttons-checkbox">
                                        <!--https://github.com/angular-ui/bootstrap/issues/233-->
                                        <button ng-repeat="value in part.values" type="button" class="btn builder option" ng-model="form[option.option_name][part.part_name]['id']" btn-radio="value.id">
                                            <div class="db-icons-sprite {{part.type}}-{{value.id}}" tooltip="{{part.type}}-{{value.id}}"></div>
                                        </button>
                                    </div>
                                </div>
                                <div class="span6">
                                    <fabric-selector ng-repeat="set in fabricSets | filterSets:part.fabricSets"  fabric-set="set" selected-option="form[option.option_name][part.part_name]"/>
                                </div>
                            </div>
                        <div class="row-fluid top-divider " ng-show="part.trim">
                            <div class="span6">
                                <label class="checkbox"><input type=checkbox ng-click="clearTrim(form[option.option_name][part.part_name])" ng-model="trim">Add trim</label>
                            </div>
                            <div class="span6" ng-show="trim">
                                <fabric-selector ng-repeat="set in fabricSets | filterSets:part.trimFabricSets" ng-checked="form[option.option_name][part.part_name]['trim']"
                                                 fabric-set="set" selected-option="form[option.option_name][part.part_name]" is-trim="true"/>
                            </div>
                        </div>

                            <!--<div class="container-fluid">-->
                                <span ng-repeat="value in part.values">
                                    <div class="row-fluid  top-border-small">
                                        <span ng-repeat="set in fabricSets | filterSets:part.fabricSets">
                                            <div class="row-fluid adminHeader">
                                                <div class="span4 align-left">
                                                    Fabric Set:
                                                </div>
                                                <div class="span4 align-center">
                                                    {{set.type}} - {{set.setName}}
                                                </div>
                                                <div class="span4 align-right">
                                                    ({{set.setId}})
                                                </div>
                                            </div>
                                            <div class="row-fluid">
                                                <span ng-repeat="fabric in set.fabrics" class="align-center">
                                                    <div class="span3">
                                                        <div class="container-fluid">

                                                            <div class="row-fluid">
                                                                <!--<div>-->
                                                                <img  ng-src="images/parts/{{part.type}}-{{value.id}}-{{fabric.fabId}}.png" tooltip="{{part.type}}-{{value.id}}-{{fabric.fabId}}" class="adminPic {{part.type}}"/>
                                                            </div>
                                                            <div class="row-fluid">
                                                                {{part.type}}-{{value.id}}-{{fabric.fabId}}
                                                            </div>
                                                            <div class="row-fluid">
                                                                {{part.type+"-"+value.id | labelLookup}} - {{fabric.fabName}}
                                                            </div>

                                                            <!--</div>-->
                                                            <!--<div class="row-fluid">-->
                                                            <!--</div>-->
                                                        </div>
                                                    </div>
                                                </span>
                                            </div>
                                        </span>
                                    </div>

                                    <div ng-show="part.trim"class="row-fluid  top-border-small">
                                        <span ng-repeat="set in fabricSets | filterSets:part.trimFabricSets">
                                            <div class="row-fluid adminHeader">
                                                <div class="span4 align-left">
                                                    Trim Fabric Set:
                                                </div>
                                                <div class="span4 align-center">
                                                    {{set.type}} - {{set.setName}}
                                                </div>
                                                <div class="span4 align-right">
                                                    ({{set.setId}})
                                                </div>
                                            </div>
                                            <div class="row-fluid">
                                                <span ng-repeat="fabric in set.fabrics" class="align-center">
                                                    <div class="span3">
                                                        <div class="container-fluid">

                                                            <div class="row-fluid">
                                                                <!--<div>-->
                                                                <img  ng-src="images/parts/trm-{{part.type}}-{{value.id}}-{{fabric.fabId}}.png" tooltip="{{part.type}}-{{value.id}}-{{fabric.fabId}}" class="adminPic {{part.type}}"/>
                                                            </div>
                                                            <div class="row-fluid">
                                                                trm-{{part.type}}-{{value.id}}-{{fabric.fabId}}
                                                            </div>
                                                            <div class="row-fluid">
                                                                .......-{{fabric.fabName}}
                                                            </div>

                                                            <!--</div>-->
                                                            <!--<div class="row-fluid">-->
                                                            <!--</div>-->
                                                        </div>
                                                    </div>
                                                </span>
                                            </div>
                                        </span>
                                    </div>
                                </span>
                            </div>
                            <!--<button ng-repeat="value in part.values" type="button" class="btn builder option" ng-model="form[option.option_name][part.part_name]['id']" btn-radio="value.id">-->
                                <!--<div class="db-icons-sprite {{part.type}}-{{value.id}}" tooltip="{{part.type}}-{{value.id}}"></div>-->
                            <!--</button>-->



                        <!--</div>-->

                    </div>

                </div>
            </div>
        </div>
        </div>
    </div>


    <div class="row-fluid" id="debug_view">
        <div class="span4 align-left">
            <a class="btn btn-mini" ng-click="isDebugCollapsed = !isDebugCollapsed">Toggle debug view</a>
        </div>
        <div class="span4 align-left">
            <a class="btn btn-mini" href="#/design/{{design.desId}}">Back to design builder</a>
        </div>
        <!--<div class="span4 align-right">-->
            <!--<a class="btn btn-mini" ng-click="isFlatDesigner = !isFlatDesigner">Toggle flat designer</a>-->
        <!--</div>-->
        <hr>
        <div collapse="isDebugCollapsed">
            <pre>form={{form}}</pre>
            <pre>fabricSets={{fabricSets}}</pre>
            <pre>trimFabricSets={{trimFabricSets}}</pre>
            <pre>dressFabricSets={{dressFabricSets}}</pre>


            <pre>master={{master}}</pre>
            <pre>category={{category}}</pre>
            <pre>design={{design}}</pre>
            <pre>range={{range}}</pre>
        </div>
    </div>
</div> <!-- /designBuildView -->